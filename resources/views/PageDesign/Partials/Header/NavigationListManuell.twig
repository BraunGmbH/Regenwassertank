
{% set lang = services.sessionStorage.getLang() %}

{% set lvl1Categories = [1095,1093,401,1094] %}
{% set lvl2Categories0 = [1093] %}
{% set lvl2Categories1 = [401] %}
{% set lvl2Categories2 = [] %}
{% set lvl2Categories3 = [1095,1091] %}


  <p class="hidden">
  {% for test in categories %} 
   <span>{{ test.id }}</span>
   {% endfor %}
  </p>
<ul class="mainmenu">
  {% set level = 0 %}
  {% set counter = 0 %}

  {% for category in categories if category.id in lvl1Categories %}
  {% set urlNow = currentScopeUrl ~ "/" ~ category.details[0].nameUrl %}

  {% if category.details[0] %}
      <li id="plentycat_{{ category.id }}" class="level{{ level }} {% for breadcrumb in breadcrumbs %}{% if category.id == breadcrumb.id %} active{% endif %}{% endfor %}">
          <a href="{{ urlNow }}{{ urls.trailingSlashSuffix }}" class="nav-link">{{ category.details[0].name }}</a>
          {% if level == 0 %}
            {% if lvl2Categories0 is not empty  %}
              <ul class="dropdown level{{counter}}">
                  {% for categoryChild in categories if categoryChild.id in lvl2Categories0 %}
                    {% set urlNowChild = "/" ~ categoryChild.details[0].nameUrl %}
                    <li id="plentycat_{{ categoryChild.id }}" class="{% for breadcrumb in breadcrumbs %}{% if categoryChild.id == breadcrumb.id %} active{% endif %}{% endfor %}">
                        <a href="{{ urlNowChild }}{{ urls.trailingSlashSuffix }}" class="nav-link">{{ categoryChild.details[0].name }}</a>
                    </li>
                  {% endfor %}
                </ul>
            {% endif %}
          {% elseif level == 1 %}
            {% if lvl2Categories1 is not empty  %}
              <ul class="dropdown level{{counter}}">
                  {% for categoryChild in categories if categoryChild.id in lvl2Categories1 %}
                    {% set urlNowChild = "/" ~ categoryChild.details[0].nameUrl %}
                    <li id="plentycat_{{ categoryChild.id }}" class="{% for breadcrumb in breadcrumbs %}{% if categoryChild.id == breadcrumb.id %} active{% endif %}{% endfor %}">
                        <a href="{{ urlNowChild }}{{ urls.trailingSlashSuffix }}" class="nav-link">{{ categoryChild.details[0].name }}</a>
                    </li>
                  {% endfor %}
                </ul>
            {% endif %}
          {% elseif level == 2 %}
            {% if lvl2Categories2 is not empty  %}
              <ul class="dropdown level{{counter}}">
                  {% for categoryChild in categories if categoryChild.id in lvl2Categories2 %}
                    {% set urlNowChild = "/" ~ categoryChild.details[0].nameUrl %}
                    <li id="plentycat_{{ categoryChild.id }}" class="{% for breadcrumb in breadcrumbs %}{% if categoryChild.id == breadcrumb.id %} active{% endif %}{% endfor %}">
                        <a href="{{ urlNowChild }}{{ urls.trailingSlashSuffix }}" class="nav-link">{{ categoryChild.details[0].name }}</a>
                    </li>
                  {% endfor %}
                </ul>
            {% endif %}
          {% elseif level == 3 %}
            {% if lvl2Categories3 is not empty  %}
              <ul class="dropdown level{{counter}}">
                  {% for categoryChild in categories if categoryChild.id in lvl2Categories3 %}
                    {% set urlNowChild = "/" ~ categoryChild.details[0].nameUrl %}
                    <li id="plentycat_{{ categoryChild.id }}" class="{% for breadcrumb in breadcrumbs %}{% if categoryChild.id == breadcrumb.id %} active{% endif %}{% endfor %}">
                        <a href="{{ urlNowChild }}{{ urls.trailingSlashSuffix }}" class="nav-link">{{ categoryChild.details[0].name }}</a>
                    </li>
                  {% endfor %}
                </ul>
            {% endif %}
          {% endif %}
      </li>
      {% set level = level + 1 %}
      {% set counter = counter + 1 %}
  {% endif %}
{% endfor %}
</ul>
